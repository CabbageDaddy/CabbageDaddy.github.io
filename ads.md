---
layout: default
description: "lalal"
header-img: "img/404-bg.jpg"
permalink: /404.html
---


#广告逻辑
-
用户前三次连接成功之前，不进行任何广告请求和展示。 19.1.25新增


应用从后台切到前台:
    
	1,补充Splash广告和Connect广告（VPN未连接）或者DisConnect广告（VPN连接）
	2,启动备用广告池监控。

###Splash  
	开启Splash时机：
		-启动应用或者从后台返回（后台时 停留在splash或者广告页面 除外）
	
	页面启动后检查Splash广告池：  
	  -有广告：800ms后跳转显示广告
	  -没有广告：
	  	1,请求splash广告
	  		-内请求到广告
	  			-耗时2000ms内且还在splash页面：直接跳转到广告页面
	  		-没有请求到广告，应用在前台，则不断轮询请求广告
	  	2,获取公共广告池广告:
	  		-有广告：800ms后跳转广告页显示广告
	  		-没有广告：2000ms后跳转到主页
	进入广告展示页面：  
		广告正常展示后，重新请求补充广告
	  	
	 
###Connect	，Disconnect
~~~
广告检查或请求的触发：
	-应用启动初次启动，触发connect广告请求。
	-应用从后台返回，没有连接vpn，会触发connect广告检查;有连接vpn，触发disconnect广告检查
	-收到vpn断开消息,准备connect广告。收到vpn连接消息，准备disconnect广告
	
广告展示：
	-vpn连接成功:			
		 检查connect广告池：
			-有connect广告，展示广告
			-没有connect广告，查询功能广告池广告：
				-有广告，展示公共广告
				-没有广告，取消广告view的展示。
	-vpn断开连接：
		检查disconnect广告池：
			-有disconnect广告，展示广告
			-没有disconnect广告，查询功能广告池广告：
				-有广告，展示公共广告
				-没有广告，取消广告view的展示。
~~~

###备用广告池
	1，应用启动或者后台返回触发备用广告监控
	2，备用广告被使用，重新开始监控		
	广告监控：
		检查当前缓存池是否有广告：
			-有广告，延迟有效期的时间后执行新的检查。
			-没有广告，请求广告并缓存。

四种类型广告都会在被使用后立即进行补充。其中：  
	1，备用广告在补充失败时会重新启动备用广告监控。  
	2，非备用广告会在补充失败时判断：如果应用在前台，重新请求广告。
	3，广告重试时发现没有网络，停止重试
	
	
	
splashAD|connectAD|disconnectAD|backupAD|adWatcher
	
	
	
	
	
	
	